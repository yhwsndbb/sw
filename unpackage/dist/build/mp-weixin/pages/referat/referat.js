(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/referat/referat"],{"0071":function(t,e,o){"use strict";(function(t){o("36fd");a(o("66fd"));var e=a(o("eacf"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"2cab":function(t,e,o){},"6eb5":function(t,e,o){"use strict";o.r(e);var a=o("86c5"),n=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"70cb":function(t,e,o){"use strict";var a,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return a}))},"86c5":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(o("8d5f"));function n(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=a?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=t[s]}return o.default=t,e&&e.set(t,o),o}var r=function(){Promise.all([o.e("common/vendor"),o.e("node-modules/mpvue-echarts/src/echarts")]).then(function(){return resolve(o("89ce"))}.bind(null,o)).catch(o.oe)},i=o("935a"),u=(i.request,i.showLoading),c=i.hideLoading,l={components:{mpvueEcharts:r},data:function(){return{echarts:a,IssueCount:0,StudentCount:0,ClassroomReport:{},MessageLogId:"",ResourcesList:[],Remark:"",playAudio:!1,ClassroomLogId:"",RealNum:0,TotalNum:0}},methods:{onTesting:function(e,o){t.navigateTo({url:"../TestingReport/TestingReport?ChapterId=".concat(e,"&ClassroomLogId=").concat(o)})},OnopenFile:function(e,o,a,n){var s=this;5==o?t.request({method:"GET",data:{testingLogId:a},url:"https://hk.joyfulboo.com/Campus/TestingApp/GetTestingStatus",header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(o){console.log(o);var r=o.data;if(1!=r.Success)return s.AddTestingLog(n,e),!1;t.navigateTo({url:"../underTest/underTest?TestingLogId="+a}),1==r.Data||s.AddTestingLog(n,e)}}):t.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/CoursewareApp/PreviewCoursewareOnline",data:{resourcesId:e,isCurrent:!1,classroomLogId:""},header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(a){console.log(a);var n=a.data;if(1!=n.Success)return t.showToast({title:n.Message,icon:"none"}),!1;if(1==o)u("加载中"),wx.downloadFile({url:n.Data,success:function(t){console.log(t);var e=t.tempFilePath;wx.openDocument({filePath:e,success:function(t){c()}})}});else if(2==o){var r=[];r.push(n.Data),console.log(r),t.previewImage({urls:r,current:r[0]})}else if(3==o)t.navigateTo({url:"../videoMP/videoMP?videoSrc="+n.Data});else if(4==o)wx.downloadFile({url:n.Data,success:function(o){console.log(o);var a=o.tempFilePath;wx.getFileSystemManager().readFile({filePath:a,encoding:"utf-8",success:function(o){console.log("readFile="+o),console.log(o);new RegExp("/n","g");var a=o.data.replace(/\n/g,"<br/>");t.setStorageSync("txtInfo",a),t.navigateTo({url:"../txt/txt?id="+e}),c()}})}});else if(6==o){var i=JSON.stringify(n.Data);t.navigateTo({url:"../videoMP/videoMP?videoArr="+i})}else if(7==o){s.$data.playAudio=!s.$data.playAudio;var l=s.$data.playAudio;l?wx.playBackgroundAudio({dataUrl:n.Data,title:"",coverImgUrl:""}):wx.stopBackgroundAudio()}}})},onQuestion:function(e,o,a,n){console.log(a,n),t.navigateTo({url:"../questionAsk/questionAsk?ClassroomLogId=".concat(e,"&ChapterId=").concat(o,"&ChapterName=").concat(a,"&TeachClass=").concat(n)})},LookInfo:function(e){t.navigateTo({url:"../AttendInfo/AttendInfo?ClassroomLogId=".concat(e,"&attendStatus=",3)})},DeleteMessage:function(){var e=this;wx.showModal({title:"提示",content:"确定要删除?",success:function(o){o.confirm?t.request({method:"GET",data:{messageLogId:e.$data.ClassroomReport.MessageLogId},url:"https://hk.joyfulboo.com/Campus/MessageLogApp/DeleteMessage",header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(e){e.data;t.showToast({title:"删除成功"}),setTimeout((function(){wx.navigateBack({delta:1})}),1e3)}}):o.cancel&&console.log("用户点击取消")}})},SaveClassroomReportRemark:function(){var e=this;t.request({method:"POST",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/SaveClassroomReportRemark",data:{MessageLogId:this.$data.ClassroomReport.MessageLogId,Remark:this.$data.Remark},header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(o){console.log(o);var a=o.data;if(1!=a.Success)return t.showToast({title:a.Message,icon:"none"}),!1;e.GetClassroomReport()}})},RemarksInput:function(e){var o=e.detail.value,a=parseInt(o.length);console.log(a),this.$data.Remark=o,a>=100&&t.showToast({title:"字数超出",icon:"none",duration:3e3})},ClassroomChart:function(t){var e=this,o=t.canvas,n=t.width,s=t.height;n-=20,a.setCanvasCreator((function(){return o}));var r=a.init(o,null,{width:n,height:s});o.setChart(r);var i={tooltip:{trigger:"item",formatter:"",show:!1},legend:{orient:"vertical",left:10,selectedMode:!1,data:[]},series:[{hoverAnimation:!1,name:"",type:"pie",silent:!0,radius:["60%","100%"],avoidLabelOverlap:!1,label:{position:"inner",color:"#fff",align:"right",verticalAlign:"middle"},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:function(t){var e=["#03C173","#FF9E18"];return e[t.dataIndex]}}},data:[{value:e.StudentCount,name:""},{value:e.IssueCount,name:""}]}]};r.setOption(i),r.setOption({series:[{data:[{value:e.StudentCount,name:""},{value:e.IssueCount,name:""}]}]}),this.$refs.ReportChart.setChart(r)},GetClassroomReport:function(){var e=this;t.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/GetClassroomReport",data:{messageLogId:this.$data.MessageLogId},header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(o){console.log(o);var a=o.data;if(1!=a.Success)return t.showToast({title:a.Message,icon:"none"}),!1;e.$data.ClassroomReport=a.Data,e.$data.ClassroomLogId=a.Data.ClassroomLogId,e.$data.ResourcesList=a.Data.ResourcesList,e.$data.IssueCount=a.Data.IssueCount,e.$data.StudentCount=a.Data.StudentCount,e.GetAttentByClassroomLog(),e.$refs.ReportChart.init()}})},GetAttentByClassroomLog:function(){var e=this;t.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/AttendApp/GetAttentByClassroomLog",data:{classroomLogId:this.$data.ClassroomLogId},header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(o){var a=o.data;if(console.log(o),1!=a.Success)return t.showToast({title:a.Message,icon:"none"}),!1;e.$data.RealNum=a.Data.RealNum,e.$data.TotalNum=a.Data.TotalNum}})}},onLoad:function(t){var e=this;this.$data.MessageLogId=t.MessageLogId,this.GetClassroomReport();var o=setInterval((function(){""!==e.$data.ClassroomLogId&&(e.GetAttentByClassroomLog(),clearInterval(o))}),1e3)}};e.default=l}).call(this,o("543d")["default"])},c987:function(t,e,o){"use strict";var a=o("2cab"),n=o.n(a);n.a},eacf:function(t,e,o){"use strict";o.r(e);var a=o("70cb"),n=o("6eb5");for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("c987");var r,i=o("f0c5"),u=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=u.exports}},[["0071","common/runtime","common/vendor"]]]);