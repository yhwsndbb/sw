(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/AttendInfo/AttendInfo"],{3441:function(t,n,e){"use strict";e.r(n);var o=e("f0b9"),a=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=a.a},4648:function(t,n,e){"use strict";(function(t){e("36fd");o(e("66fd"));var n=o(e("d6c5"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"5afd":function(t,n,e){"use strict";var o,a=function(){var t=this,n=t.$createElement,e=(t._self._c,{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:""});t.$mp.data=Object.assign({},{$root:{a0:e}})},s=[];e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}))},b677:function(t,n,e){"use strict";var o=e("d482"),a=e.n(o);a.a},d482:function(t,n,e){},d6c5:function(t,n,e){"use strict";e.r(n);var o=e("5afd"),a=e("3441");for(var s in a)"default"!==s&&function(t){e.d(n,t,(function(){return a[t]}))}(s);e("b677");var c,d=e("f0c5"),i=Object(d["a"])(a["default"],o["b"],o["c"],!1,null,"c0f68e98",null,!1,o["a"],c);n["default"]=i.exports},f0b9:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){e.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(e("5c56"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/DataNo").then(function(){return resolve(e("9ef9"))}.bind(null,e)).catch(e.oe)},s={components:{DataNo:a,uniLoadMore:o},data:function(){return{AttendInfoList:[],ClassroomLogId:"",attendStatus:"",ResourcesY:"",AttendLoad:"",AttendY:""}},methods:{onAttendStart:function(t){1==t.touches.length&&(this.AttendY=t.touches[0].clientY)},onAttendMove:function(t){if(console.log(t),1==t.touches.length){var n=t.touches[0].clientY,e=this.AttendY-n;t.touches[0].pageY;this.AttendY<100&&(355==e||e<355?(this.$data.AttendLoad="loading",this.GetAttendInfo()):e>355&&(this.$data.AttendLoad=""))}},onLoading:function(){var n=this;t.showLoading({title:"加载中",success:function(){n.GetAttendInfo()}}),setTimeout((function(){t.hideLoading()}),2e3)},GetAttendInfo:function(){var n=this,e=this;t.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/AttendApp/GetAttendInfo",data:{classroomLogId:this.$data.ClassroomLogId,attendStatus:this.$data.attendStatus,studentName:""},header:{"content-type":"application/json",Authorization:t.getStorageSync("token")},success:function(o){console.log(o);var a=o.data;if(1!=a.Success)return t.showToast({title:a.Message,icon:"none"}),!1;n.$data.AttendInfoList=a.Data,setTimeout((function(){e.$data.AttendLoad=""}),2e3)}})},callMethods:function(t){switch(t.M[0].M){case"pong":console.log("Pong防止nginx中断连接");break;case"xcxMessage":console.log(t.M[0].A[0]);var n=t.M[0].A[0];12==n.MessageType&&this.GetAttendInfo();break;default:console.log(t)}}},onLoad:function(t){var n=this;this.$data.ClassroomLogId=t.ClassroomLogId,this.$data.attendStatus=t.attendStatus,this.GetAttendInfo(),wx.onSocketMessage((function(t){try{var e=String(t.data).replace(recordString,"");if(e.indexOf("{}")>-1&&(e=e.replace("{}","")),0!=e.length){var o=JSON.parse(e);console.log("server return :",o),"M"in o&&o.M.length>0&&n.callMethods(o)}}catch(a){console.log("异常："+a),console.log("收到服务器内容："+t.data)}}))}};n.default=s}).call(this,e("543d")["default"])}},[["4648","common/runtime","common/vendor"]]]);