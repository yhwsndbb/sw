(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editTag/editTag"],{"02b0":function(a,t,e){"use strict";var s,i=function(){var a=this,t=a.$createElement;a._self._c},d=[];e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return d})),e.d(t,"a",(function(){return s}))},"296e":function(a,t,e){},"436e":function(a,t,e){"use strict";(function(a){function s(a){return o(a)||n(a)||d(a)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(a,t){if(a){if("string"===typeof a)return r(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(a,t):void 0}}function n(a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function o(a){if(Array.isArray(a))return r(a)}function r(a,t){(null==t||t>a.length)&&(t=a.length);for(var e=0,s=new Array(t);e<t;e++)s[e]=a[e];return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){e.e("node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar").then(function(){return resolve(e("b501"))}.bind(null,e)).catch(e.oe)},c={components:{uniSearchBar:u},data:function(){return{selectedTag:null,RelaTagList:[],tagList:[],ChapterId:"",ClassId:"",addTagName:"",resTags:[],tagsRes:[],bankTags:[],newBankTags:[],addTags:[],deleteTags:[]}},methods:{AddResourcesTag:function(){var t=this;a.request({method:"POST",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/AddResourcesTag",data:{ResourcesId:t.$data.ResourcesId,TagName:t.$data.addTagName},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(e){console.log(e);var s=e.data;if(1!=s.Success)return a.showToast({title:s.Message,icon:"none"}),!1;a.showToast({title:"添加成功",duration:3e3}),t.GetTagList()}})},tabInputVal:function(a){this.$data.addTagName=a.detail.value},onResouresList:function(){a.navigateTo({url:"../uploadResoures/uploadResoures?TagId=".concat("&ChapterId=",this.$data.ChapterId,"&ClassId=").concat(this.$data.ClassId)})},getTagInfo:function(a,t){for(var e in-1!==this.$data.bankTags.indexOf(a)?-1!==this.$data.addTags.indexOf(a)&&this.$data.addTags.splice(this.$data.addTags.indexOf(a),1):(this.$data.tagsBank.push(this.$data.RelaTagList[t]),this.$data.bankTags.push(a)),this.$data.RelaTagList.splice(t,1),this.$data.tagsRes)if(this.$data.tagsRes[e]===a){this.$data.deleteTags.push(a),e;break}this.$data.resTags.splice(t,1),this.$data.tagList[this.$data.newBankTags.indexOf(a)].is=!1},AddTag:function(a,t){if(-1!==this.$data.resTags.indexOf(t)){for(var e in this.$data.resTags.splice(this.$data.resTags.indexOf(t),1),-1!==this.$data.tagsRes.indexOf(t)?-1==this.$data.deleteTags.indexOf(t)?this.$data.deleteTags.push(t):this.$data.deleteTags.splice(this.$data.deleteTags.indexOf(t),1):-1==this.$data.addTags.indexOf(t)?this.$data.addTags.push(t):this.$data.addTags.splice(this.$data.addTags.indexOf(t),1),this.$data.RelaTagList)this.$data.RelaTagList[e].TagId===t&&this.$data.RelaTagList.splice(e,1);for(var s in this.$data.tagList)if(this.$data.tagList[s].TagId===t)return void(this.$data.tagList[s].is=!1)}-1==this.$data.resTags.indexOf(t)&&(this.$data.resTags.push(t),this.$data.RelaTagList.push(this.$data.tagList[this.$data.newBankTags.indexOf(t)]),this.$data.tagList[this.$data.newBankTags.indexOf(t)].is=!0),-1==this.$data.tagsRes.indexOf(t)&&-1==this.$data.addTags.indexOf(t)&&this.$data.addTags.push(t),-1!==this.$data.deleteTags.indexOf(t)&&this.$data.deleteTags.splice(this.$data.deleteTags.indexOf(t),1)},GetResourcesTag:function(){var t=this;a.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/GetResourcesTag",data:{resourcesId:this.$data.ResourcesId,resourcesType:this.$data.ResourcesType},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(e){console.log(e);var s=e.data;if(1!=s.Success)return a.showToast({title:s.Message,icon:"none"}),!1;for(var i in t.$data.tagList=s.Data.AllTagList,t.$data.tagList)t.$data.tagList[i];for(var d in t.$data.RelaTagList=s.Data.RelaTagList,t.$data.RelaTagList)t.$data.resTags.push(t.$data.RelaTagList[d].TagId),t.$data.tagsRes.push(t.$data.RelaTagList[d].TagId);for(var n in t.$data.tagList)for(var o in t.$data.bankTags.push(t.$data.tagList[n].TagId),t.$data.newBankTags.push(t.$data.tagList[n].TagId),t.$data.RelaTagList)t.$data.RelaTagList[o].TagId===t.$data.tagList[n].TagId&&(t.$data.tagList[n].is=!0)}})},submitThis:function(){var t=this.$data,e=s(new Set(t.addTags)),i=s(new Set(t.deleteTags)),d=[],n=[];for(var o in e)-1===t.tagsRes.indexOf(e[o])&&d.push(e[o]);for(var r in i)-1!==t.tagsRes.indexOf(i[r])&&(n.push(i[r]),-1!==t.addTags.indexOf(i[r])&&n.splice(n.indexOf(i[r]),1));console.log(d),console.log(n),a.request({method:"POST",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/SaveResourcesTag",data:{ResourcesId:t.ResourcesId,AddTagIds:d.toString(),DelTagIds:n.toString()},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(t){console.log(t);var e=t.data;if(1!=e.Success)return a.showToast({title:e.Message,icon:"none"}),!1;a.showToast({title:"保存成功",duration:3e3}),setTimeout((function(){wx.navigateBack({delta:1})}),3e3)}})}},onLoad:function(a){this.$data.ResourcesId=a.ResourcesId,this.$data.ChapterId=a.ChapterId,this.$data.ClassId=a.ClassId,this.$data.ResourcesType=a.ResourcesType,this.GetResourcesTag()}};t.default=c}).call(this,e("543d")["default"])},"5ea9":function(a,t,e){"use strict";e.r(t);var s=e("436e"),i=e.n(s);for(var d in s)"default"!==d&&function(a){e.d(t,a,(function(){return s[a]}))}(d);t["default"]=i.a},8277:function(a,t,e){"use strict";e.r(t);var s=e("02b0"),i=e("5ea9");for(var d in i)"default"!==d&&function(a){e.d(t,a,(function(){return i[a]}))}(d);e("f62e");var n,o=e("f0c5"),r=Object(o["a"])(i["default"],s["b"],s["c"],!1,null,"1fb7d24e",null,!1,s["a"],n);t["default"]=r.exports},f62e:function(a,t,e){"use strict";var s=e("296e"),i=e.n(s);i.a},fded:function(a,t,e){"use strict";(function(a){e("36fd");s(e("66fd"));var t=s(e("8277"));function s(a){return a&&a.__esModule?a:{default:a}}a(t.default)}).call(this,e("543d")["createPage"])}},[["fded","common/runtime","common/vendor"]]]);