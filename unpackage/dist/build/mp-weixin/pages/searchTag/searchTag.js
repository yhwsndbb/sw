(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/searchTag/searchTag","node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar"],{"17f9":function(e,t,a){"use strict";a.r(t);var n=a("280d"),o=a("aeab");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("e388");var i,c=a("f0c5"),u=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"093327fc",null,!1,n["a"],i);t["default"]=u.exports},"280d":function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}))},"29c2":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){Promise.all([a.e("common/vendor"),a.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(a("a4c5"))}.bind(null,a)).catch(a.oe)},o={name:"UniSearchBar",components:{uniIcons:n},props:{placeholder:{type:String,default:"请输入搜索内容"},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100}},data:function(){return{show:!1,showSync:!1,searchVal:""}},watch:{searchVal:function(){this.$emit("input",{value:this.searchVal})}},methods:{searchClick:function(){var e=this;this.show||(this.searchVal="",this.show=!0,this.$nextTick((function(){e.showSync=!0})))},clear:function(){this.searchVal=""},cancel:function(){this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,e.hideKeyboard()},confirm:function(){e.hideKeyboard(),this.$emit("confirm",{value:this.searchVal})}}};t.default=o}).call(this,a("543d")["default"])},4542:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a("b501"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=a("935a"),c=(i.request,i.showLoading),u=i.hideLoading,r=function(){a.e("components/DataNo").then(function(){return resolve(a("9ef9"))}.bind(null,a)).catch(a.oe)},l={components:{uniSearchBar:n.default,DataNo:r},data:function(){var e;return e={DataNo:!1,tagList:[],ChapterId:"",ClassId:"",searchValue:"",TagId:"",fileType:"",ResourcesList:[],activeEdit:null,delBtnWidth:400,startX:"",isEdit:!1,currentPage:1,pageSize:10},s(e,"searchValue",""),s(e,"TotalPages",""),s(e,"renameName",""),s(e,"resourcesType",""),e},methods:{onCancel:function(){wx.navigateBack({delta:1})},searchTag:function(e){this.$data.searchValue=e.value,""==e.value&&(this.$data.ResourcesList=[])},onSearch:function(e){this.GetResourcesByPage()},getTagInfo:function(t){e.navigateTo({url:"../ResourcesTag/ResourcesTag?TagId="+t})},GetTagList:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/GetTagList",data:{},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var n=a.data;if(1!=n.Success)return e.showToast({title:n.Message,icon:"none"}),!1;t.$data.tagList=n.Data}})},onLoading:function(){var t=this;e.showLoading({title:"加载中",success:function(){t.GetResourcesByPage()}}),setTimeout((function(){e.hideLoading()}),2e3)},onEditTag:function(t,a){var n=this;e.navigateTo({url:"../editTag/editTag?ResourcesId=".concat(t,"&ResourcesType=").concat(a)}),setTimeout((function(){n.$data.activeEdit=null}),4e3)},RenameResources:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/RenameResources",data:{resourcesId:t.$data.resourcesId,resourcesType:t.$data.resourcesType,renameName:t.$data.renameName},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var n=a.data;if(1!=n.Success)return e.showToast({title:n.Message,icon:"none"}),!1;e.showToast({title:"修改成功",duration:3e3}),t.$data.isEdit=!1,t.GetResourcesByPage()}})},unhide:function(){this.$data.isEdit=!1,this.$data.activeEdit=null},onEdit:function(e,t){this.$data.resourcesType=t,this.$data.resourcesId=e,this.$data.isEdit=!0},inputVal:function(e){this.$data.renameName=e.detail.value},DeleteResources:function(t){console.log(t);var a=this;wx.showModal({title:"提示",content:"确认要删除此课件吗？",success:function(n){n.confirm?e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/DeleteResources",data:{resourcesId:t},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(t){console.log(t);var n=t.data;if(1!=n.Success)return e.showToast({title:n.Message,icon:"none"}),!1;e.showToast({title:"删除成功",duration:3e3}),a.GetResourcesByPage()}}):n.cancel&&console.log("用户点击取消")}})},OpenFile:function(t,a){var n=this;5==a?e.navigateTo({url:"../testInfo/testInfo?ResourcesId="+t}):e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/CoursewareApp/PreviewCoursewareOnline",data:{resourcesId:t,isCurrent:!1,classroomLogId:""},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(t){console.log(t);var o=t.data;if(1!=o.Success)return e.showToast({title:o.Message,icon:"none"}),!1;if(1==a)c("加载中"),wx.downloadFile({url:o.Data,success:function(e){console.log(e);var t=e.tempFilePath;wx.openDocument({filePath:t,success:function(e){u()}})}});else if(2==a){var s=[];s.push(o.Data),console.log(s),e.previewImage({urls:s,current:s[0]})}else if(3==a)e.navigateTo({url:"../videoMP/videoMP?videoSrc="+o.Data});else if(7==a){n.$data.playAudio=!n.$data.playAudio;var i=n.$data.playAudio;i?wx.playBackgroundAudio({dataUrl:o.Data,title:"",coverImgUrl:""}):wx.stopBackgroundAudio()}}})},GetResourcesByPage:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/GetResourcesByPage",data:{tagId:t.$data.TagId,fileType:t.$data.fileType,currentPage:t.$data.currentPage,pageSize:t.$data.pageSize,searchValue:t.$data.searchValue},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var n=a.data;if(1!=n.Success)return e.showToast({title:n.Message,icon:"none"}),!1;var o=Math.ceil(n.RecordCount/t.$data.pageSize);t.$data.TotalPages=o;var s=t.$data.ResourcesList,i=t.$data.currentPage;if(1==t.$data.currentPage)s=n.Data,console.log(s),i=1,e.stopPullDownRefresh();else{var c=a.data.Data;s=s.concat(c),i+=1}t.$data.activeEdit=null,t.$data.ResourcesList=s,t.$data.currentPage=i,0==t.$data.ResourcesList.length?t.$data.DataNo=!0:t.$data.DataNo=!1}})},onPanStart:function(e){1==e.touches.length&&(this.startX=e.touches[0].clientX)},onPanMove:function(e){if(1==e.touches.length){var t=e.touches[0].clientX,a=this.startX-t,n=this.delBtnWidth,o=e.currentTarget.dataset.index;0==a||a<0?this.$data.activeEdit=null:a>0&&(this.$data.activeEdit=o,a>=n&&(this.$data.activeEdit=o))}}},onReachBottom:function(){this.$data.currentPage<this.$data.TotalPages?(this.$data.currentPage++,this.GetResourcesByPage()):console.log("没有更多数据了")},onPullDownRefresh:function(){this.$data.currentPage=1,this.GetResourcesByPage()},onLoad:function(e){this.$data.ChapterId=e.ChapterId,this.$data.ClassId=e.ClassId,this.GetTagList()}};t.default=l}).call(this,a("543d")["default"])},"8a92":function(e,t,a){},"91a2":function(e,t,a){},"9cc4":function(e,t,a){"use strict";(function(e){a("36fd");n(a("66fd"));var t=n(a("17f9"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},a033:function(e,t,a){"use strict";a.r(t);var n=a("29c2"),o=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a},a4da:function(e,t,a){"use strict";var n=a("8a92"),o=a.n(n);o.a},aeab:function(e,t,a){"use strict";a.r(t);var n=a("4542"),o=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a},b167:function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}))},b501:function(e,t,a){"use strict";a.r(t);var n=a("b167"),o=a("a033");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("a4da");var i,c=a("f0c5"),u=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"705be931",null,!1,n["a"],i);t["default"]=u.exports},e388:function(e,t,a){"use strict";var n=a("91a2"),o=a.n(n);o.a}},[["9cc4","common/runtime","common/vendor"]]]);