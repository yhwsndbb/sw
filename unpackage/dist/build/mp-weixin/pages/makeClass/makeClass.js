(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/makeClass/makeClass"],{"226b":function(a,t,e){"use strict";var s,o=function(){var a=this,t=a.$createElement,e=(a._self._c,a.__map(a.WeekDataList,(function(t,e){var s=t.Date.substring(5,10).replace("-",".");return{$orig:a.__get_orig(t),g0:s}}))),s=a.__map(a.curriculumList,(function(t,e){var s=t.StartTime.substring(10,16),o=t.EndTime.substring(11,16);return{$orig:a.__get_orig(t),g1:s,g2:o}}));a.$mp.data=Object.assign({},{$root:{l0:e,l1:s}})},r=[];e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return s}))},"2f27":function(a,t,e){"use strict";var s=e("e9a5"),o=e.n(s);o.a},"6ec8":function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{classCategoryList:[{CategoryName:"正常上课"},{CategoryName:"班级活动"},{CategoryName:"社团活动"},{CategoryName:"其他"},{CategoryName:"网课"}],ClassroomLogShow:!1,selectClass:!1,curriculumList:[],ClassroomList:[],WeekDataList:[],selectClassroom:"",btnnum:0,reserveDate:"",ChapterName:"",ApplyCause:"",ClassroomLogId:"",classroomCode:"",CurriculumCode:"",ChapterId:"",TeachClass:"",TeachClassId:"",SectionNum:"",StartTime:"",EndTime:"",Remark:""}},methods:{onMakeRecord:function(){a.navigateTo({url:"../MakeRecord/MakeRecord"})},SaveClassroomLog:function(){var t=this,e=this,s=this.$data;""!=s.ApplyCause?""!=s.ChapterName?""!=s.TeachClass?a.request({method:"POST",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/SaveClassroomLog",data:{ClassroomLogId:null,ClassroomCode:s.classroomCode,CurriculumCode:s.CurriculumCode,ChapterId:s.ChapterId,TeachClass:s.TeachClass,TeachClassId:s.TeachClassId,ReserveDate:s.reserveDate,SectionNum:s.SectionNum,ApplyCause:s.ApplyCause,Remark:s.Remark,StartTime:s.StartTime,EndTime:s.EndTime},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(o){console.log(o);var r=o.data;if(1!=r.Success)return a.showToast({title:r.Message,icon:"none"}),!1;a.showToast({title:"预约成功"}),t.$data.ClassroomLogShow=!1,s.ApplyCause="",s.ChapterName="",s.TeachClass="",e.GetClassroomLogList()}}):a.showToast({title:"班级不能为空",icon:"none"}):a.showToast({title:"章节不能为空",icon:"none"}):a.showToast({title:"课程不能为空",icon:"none"})},abolish:function(){this.$data.ClassroomLogShow=!1,this.$data.ApplyCause="",this.$data.ChapterName="",this.$data.TeachClass="",this.$forceUpdate(),console.log(this.$data.ApplyCause)},ClassTree:function(){a.navigateTo({url:"../ClassTree/ClassTree"})},selectCategory:function(a){this.$data.ApplyCause=a,this.$data.selectClass=!this.$data.selectClass},onChapter:function(){a.navigateTo({url:"../classChapter/classChapter"})},onClassCategory:function(){this.$data.selectClass=!this.$data.selectClass},onReserve:function(t,e,s,o,r,n){var c=this;if(!t&e)a.showToast({title:"当前课程不可预约！",icon:"none"});else if(t)wx.showModal({title:"提示",content:"确定取消预约吗？",success:function(t){t.confirm?a.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/CancelClassroomLog",data:{classroomLogId:s},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(t){console.log(t);var e=t.data;if(1!=e.Success)return a.showToast({title:e.Message,icon:"none"}),!1;a.showToast({title:"取消成功"}),c.GetClassroomLogList()}}):t.cancel&&console.log("用户点击取消")}});else if(!t&&!e){switch(o){case"一":o="1";break;case"二":o="2";break;case"三":o="3";break;case"四":o="4";break;case"五":o="5";break;case"六":o="6";break;case"七":o="7";break;case"八":o="8";break;case"九":o="9";break}console.log(s),this.$data.ClassroomLogId=s,console.log(this.$data.ClassroomLogId),this.$data.SectionNum=o,this.$data.StartTime=r,this.$data.EndTime=n,this.$data.ClassroomLogShow=!0}},getleft:function(a){console.log(a)},Tabchange:function(a,t){console.log(a,t),this.btnnum=a,this.$data.reserveDate=t,this.GetClassroomLogList()},bindClassroomChange:function(a){console.log(a);var t=this.$data.ClassroomList[a.detail.value];this.$data.selectClassroom=t.ClassroomName,this.$data.classroomCode=t.ClassroomCore,this.GetClassroomLogList()},GetClassroomList:function(){var t=this;a.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/GetClassroomList",data:{},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(e){console.log(e);var s=e.data;if(1!=s.Success)return a.showToast({title:s.Message,icon:"none"}),!1;t.$data.ClassroomList=s.Data,t.$data.classroomCode=s.Data[0].ClassroomCore}})},GetWeekData:function(){var t=this;a.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/GetWeekData",data:{},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(e){console.log(e);var s=e.data;if(1!=s.Success)return a.showToast({title:s.Message,icon:"none"}),!1;t.$data.WeekDataList=s.Data,t.$data.reserveDate=s.Data[0].Date}})},GetClassroomLogList:function(){var t=this,e=this;a.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ClassroomLogApp/GetClassroomLogList",data:{classroomCode:e.$data.classroomCode,reserveDate:e.$data.reserveDate},header:{"content-type":"application/json",Authorization:a.getStorageSync("token")},success:function(e){console.log(e);var s=e.data;if(1!=s.Success)return a.showToast({title:s.Message,icon:"none"}),!1;for(var o in t.$data.curriculumList=s.Data,s.Data){var r=s.Data[o];switch(r.SectionNum){case"1":r.SectionNum="一";break;case"2":r.SectionNum="二";break;case"3":r.SectionNum="三";break;case"4":r.SectionNum="四";break;case"5":r.SectionNum="五";break;case"6":r.SectionNum="六";break;case"7":r.SectionNum="七";break;case"8":r.SectionNum="八";break;case"9":r.SectionNum="九";break}}}})}},onLoad:function(){var a=this,t=this;this.GetClassroomList(),this.GetWeekData();var e=setInterval((function(){0!==a.$data.WeekDataList.length&&""!==a.$data.classroomCode&&(t.GetClassroomLogList(),clearInterval(e))}),1e3)},onShow:function(){var a=this,t=this,e=getCurrentPages(),s=e[e.length-1];this.$data.ChapterId=s.data.ChapterId,this.$data.CurriculumCode=s.data.CurriculumCode,this.$data.ChapterName=s.data.ChapterName,this.$data.TeachClass=s.data.TeachClass,this.$data.TeachClassId=s.data.TeachClassId;var o=setInterval((function(){0!==a.$data.WeekDataList.length&&""!==a.$data.classroomCode&&(t.GetClassroomLogList(),clearInterval(o))}),1e3)}};t.default=e}).call(this,e("543d")["default"])},a15d:function(a,t,e){"use strict";e.r(t);var s=e("226b"),o=e("c233");for(var r in o)"default"!==r&&function(a){e.d(t,a,(function(){return o[a]}))}(r);e("2f27");var n,c=e("f0c5"),i=Object(c["a"])(o["default"],s["b"],s["c"],!1,null,"5167ef93",null,!1,s["a"],n);t["default"]=i.exports},bdcd:function(a,t,e){"use strict";(function(a){e("36fd");s(e("66fd"));var t=s(e("a15d"));function s(a){return a&&a.__esModule?a:{default:a}}a(t.default)}).call(this,e("543d")["createPage"])},c233:function(a,t,e){"use strict";e.r(t);var s=e("6ec8"),o=e.n(s);for(var r in s)"default"!==r&&function(a){e.d(t,a,(function(){return s[a]}))}(r);t["default"]=o.a},e9a5:function(a,t,e){}},[["bdcd","common/runtime","common/vendor"]]]);