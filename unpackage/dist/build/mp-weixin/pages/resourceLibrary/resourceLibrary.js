(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/resourceLibrary/resourceLibrary","node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar"],{"0a91":function(e,t,a){"use strict";(function(e){a("36fd");o(a("66fd"));var t=o(a("df72"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},1628:function(e,t,a){"use strict";var o=a("b4ef"),n=a.n(o);n.a},"29c2":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){Promise.all([a.e("common/vendor"),a.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(a("a4c5"))}.bind(null,a)).catch(a.oe)},n={name:"UniSearchBar",components:{uniIcons:o},props:{placeholder:{type:String,default:"请输入搜索内容"},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100}},data:function(){return{show:!1,showSync:!1,searchVal:""}},watch:{searchVal:function(){this.$emit("input",{value:this.searchVal})}},methods:{searchClick:function(){var e=this;this.show||(this.searchVal="",this.show=!0,this.$nextTick((function(){e.showSync=!0})))},clear:function(){this.searchVal=""},cancel:function(){this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,e.hideKeyboard()},confirm:function(){e.hideKeyboard(),this.$emit("confirm",{value:this.searchVal})}}};t.default=n}).call(this,a("543d")["default"])},3296:function(e,t,a){"use strict";a.r(t);var o=a("f490"),n=a.n(o);for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a},"8a92":function(e,t,a){},a033:function(e,t,a){"use strict";a.r(t);var o=a("29c2"),n=a.n(o);for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a},a4da:function(e,t,a){"use strict";var o=a("8a92"),n=a.n(o);n.a},b167:function(e,t,a){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o}))},b4ef:function(e,t,a){},b501:function(e,t,a){"use strict";a.r(t);var o=a("b167"),n=a("a033");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("a4da");var i,u=a("f0c5"),c=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,"705be931",null,!1,o["a"],i);t["default"]=c.exports},df72:function(e,t,a){"use strict";a.r(t);var o=a("fb9d"),n=a("3296");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("1628");var i,u=a("f0c5"),c=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,"160a45e6",null,!1,o["a"],i);t["default"]=c.exports},f490:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("b501"));function n(e){return e&&e.__esModule?e:{default:e}}var s=function(){a.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(function(){return resolve(a("5c56"))}.bind(null,a)).catch(a.oe)},i=a("935a"),u=(i.request,i.showLoading),c=i.hideLoading,r={components:{uniSearchBar:o.default,uniLoadMore:s},data:function(){return{ResourcesList:[],activeEdit:null,delBtnWidth:400,startX:"",isEdit:!1,currentPage:1,pageSize:10,searchValue:"",TotalPages:"",renameName:"",resourcesType:"",FileTypeList:[],ResourcesLoad:"",ResourcesY:"",ResourcesPageY:"",txtResult:""}},methods:{onResourcesStart:function(e){console.log(e),1==e.touches.length&&(this.ResourcesY=e.touches[0].clientY,this.$data.ResourcesPageY=e.touches[0].pageY,console.log(this.$data.ResourcesPageY))},onResourcesMove:function(e){if(1==e.touches.length){var t=e.touches[0].clientY,a=this.ResourcesY-t;this.$data.ResourcesPageY<210&&(e.stopPropagation(),e.preventDefault(),a<-80&&!this.$data.ResourcesLoad?(this.$data.ResourcesLoad="loading",this.GetResourcesByPage()):a>310&&(this.$data.ResourcesLoad=""))}},onFileType:function(t){e.navigateTo({url:"../ResourcesTag/ResourcesTag?FileType="+t})},onEditTag:function(t,a){var o=this;e.navigateTo({url:"../editTag/editTag?ResourcesId=".concat(t,"&ResourcesType=").concat(a)}),setTimeout((function(){o.$data.activeEdit=null}),4e3)},UploadResources:function(){e.navigateTo({url:"../uploadFile/uploadFile?name=https://hk.joyfulboo.com/Campus/ResourcesApp/UploadResources&tagid=0"})},goSearch:function(){e.navigateTo({url:"../searchTag/searchTag"})},GetEnumTypeInfo:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/GetEnumTypeInfo",data:{enumType:"FileType"},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var o=a.data;if(1!=o.Success)return e.showToast({title:o.Message,icon:"none"}),!1;t.$data.FileTypeList=o.Data}})},RenameResources:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/RenameResources",data:{resourcesId:t.$data.resourcesId,resourcesType:t.$data.resourcesType,renameName:t.$data.renameName},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var o=a.data;if(1!=o.Success)return e.showToast({title:o.Message,icon:"none"}),!1;e.showToast({title:"修改成功",duration:3e3}),t.$data.isEdit=!1,t.GetResourcesByPage()}})},unhide:function(){this.$data.isEdit=!1,this.$data.activeEdit=null},onEdit:function(e,t){this.$data.resourcesType=t,this.$data.resourcesId=e,this.$data.isEdit=!0},inputVal:function(e){this.$data.renameName=e.detail.value},DeleteResources:function(t){console.log(t);var a=this;wx.showModal({title:"提示",content:"确认要删除此课件吗？",success:function(o){o.confirm?e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/DeleteResources",data:{resourcesId:t},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(t){console.log(t);var o=t.data;if(1!=o.Success)return e.showToast({title:o.Message,icon:"none"}),!1;e.showToast({title:"删除成功",duration:3e3}),a.GetResourcesByPage()}}):o.cancel&&console.log("用户点击取消")}})},OpenFile:function(t,a){var o=this;5==a?e.navigateTo({url:"../testInfo/testInfo?ResourcesId="+t}):e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/CoursewareApp/PreviewCoursewareOnline",data:{resourcesId:t,isCurrent:!1,classroomLogId:""},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(n){console.log(n);var s=n.data;if(1!=s.Success)return e.showToast({title:s.Message,icon:"none"}),!1;if(1==a)u("加载中"),console.log("打开文件"),wx.downloadFile({url:s.Data,success:function(e){console.log(e);var t=e.tempFilePath;wx.openDocument({filePath:t,success:function(e){c()}})}});else if(2==a){var i=[];i.push(s.Data),console.log(i),e.previewImage({urls:i,current:i[0]})}else if(3==a)e.navigateTo({url:"../videoMP/videoMP?videoSrc="+s.Data});else if(4==a)wx.downloadFile({url:s.Data,success:function(a){console.log(a);var o=a.tempFilePath;wx.getFileSystemManager().readFile({filePath:o,encoding:"utf-8",success:function(a){console.log("readFile="+a),console.log(a);new RegExp("/n","g");var o=a.data.replace(/\n/g,"<br/>");e.setStorageSync("txtInfo",o),e.navigateTo({url:"../txt/txt?id="+t}),c()}})}});else if(6==a){var r=JSON.stringify(s.Data);e.navigateTo({url:"../videoMP/videoMP?videoArr="+r})}else if(7==a){o.$data.playAudio=!o.$data.playAudio;var l=o.$data.playAudio;l?wx.playBackgroundAudio({dataUrl:s.Data,title:"",coverImgUrl:""}):wx.stopBackgroundAudio()}}})},GetResourcesByPage:function(){var t=this;e.request({method:"GET",url:"https://hk.joyfulboo.com/Campus/ResourcesApp/GetResourcesByPage",data:{tagId:"",fileType:"",currentPage:t.$data.currentPage,pageSize:t.$data.pageSize,searchValue:t.$data.searchValue},header:{"content-type":"application/json",Authorization:e.getStorageSync("token")},success:function(a){console.log(a);var o=a.data;if(1!=o.Success)return e.showToast({title:o.Message,icon:"none"}),!1;var n=Math.ceil(o.RecordCount/t.$data.pageSize);t.$data.TotalPages=n;var s=t.$data.ResourcesList,i=t.$data.currentPage;if(1==t.$data.currentPage)s=o.Data,i=1,e.stopPullDownRefresh();else{var u=a.data.Data;s=s.concat(u),i+=1}t.$data.activeEdit=null,t.$data.ResourcesList=s,t.$data.currentPage=i,setTimeout((function(){t.$data.ResourcesLoad=""}),2e3)}})},onPanStart:function(e){1==e.touches.length&&(this.startX=e.touches[0].clientX)},onPanMove:function(e){if(console.log("ewe"),1==e.touches.length){var t=e.touches[0].clientX,a=this.startX-t,o=this.delBtnWidth,n=e.currentTarget.dataset.index;100==a||a<100?(e.stopPropagation(),e.preventDefault(),this.$data.activeEdit=null):a>100&&(e.stopPropagation(),e.preventDefault(),this.$data.activeEdit=n,a>=o&&(this.$data.activeEdit=n))}}},onReachBottom:function(){this.$data.currentPage<this.$data.TotalPages?(this.$data.currentPage++,this.GetResourcesByPage()):console.log("没有更多数据了")},onPullDownRefresh:function(){this.$data.currentPage=1,this.GetResourcesByPage()},onLoad:function(){this.GetResourcesByPage(),this.GetEnumTypeInfo()},onShow:function(){this.GetResourcesByPage()}};t.default=r}).call(this,a("543d")["default"])},fb9d:function(e,t,a){"use strict";var o,n=function(){var e=this,t=e.$createElement,a=(e._self._c,{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:""});e.$mp.data=Object.assign({},{$root:{a0:a}})},s=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o}))}},[["0a91","common/runtime","common/vendor"]]]);